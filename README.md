# 浅色目标检测项目 (Shallow Detection)

## 项目概述
本项目实现了两种基于颜色空间的浅色目标检测算法：HSV颜色空间方法和C1C2C3颜色空间方法。程序能够处理遥感影像数据，检测其中的浅色区域，并输出二值化结果图像。

## 功能特性
- 支持GDAL库读取遥感影像数据
- 提供影像数据到OpenCV Mat格式的转换
- 实现两种浅色目标检测算法：
  - HSV颜色空间检测
  - C1C2C3颜色空间检测
- 包含形态学后处理（闭运算）功能
- 可选的直方图均衡化功能（当前注释状态）

## 依赖项
- OpenCV (4.x或更高版本)
- GDAL (3.x或更高版本)
- C++17或更高标准

## 编译与运行
1. 确保已安装所有依赖库
2. 使用支持C++17的编译器编译项目
3. 运行程序前，修改main函数中的输入文件路径
4. 执行程序，将在当前目录生成检测结果图像

## 使用方法
1. 修改`main.cpp`中的输入文件路径：
   ```cpp
   const char* pszFilename = "E:/part3/zy-3-wd.img"; // 修改为您的影像路径
   ```

2. 编译并运行程序

3. 程序将生成两个结果文件：
   - `Shallow-hsv_close.png` (HSV方法检测结果)
   - `Shallow-c1c2c3_close.png` (C1C2C3方法检测结果)

## 算法说明
### HSV颜色空间方法
1. 将RGB图像转换为HSV颜色空间
2. 计算每个像素的阴影指标：m = (s - v) / (h + s + v)
3. 如果m > 0，则标记为阴影(255)，否则标记为非阴影(0)
4. 应用闭运算进行后处理

### C1C2C3颜色空间方法
1. 计算每个像素的C1、C2、C3分量：
   - C1 = atan(r / max(g,b))
   - C2 = atan(g / max(r,b))
   - C3 = atan(b / max(r,g))
2. 如果C3 > 0.4且蓝色通道值<110，则标记为阴影(255)，否则标记为非阴影(0)
3. 应用闭运算进行后处理


